!function(t,e,n){var i={getLocale:function(t){if(this.isContributionsPostsPage()||this.isContributionsCommunityCommentsPage()||this.isContributionsCommentsPage())return this.getUrlParameter("locale");var n=(t||e.location.href).split("/"),i=n.indexOf("hc");return n[i+1].split("?")[0]},getPageId:function(t){var n=(t||e.location.href).split("/"),i=n[n.length-1];return parseInt(i,10)||null},getCategoryId:function(e){if(this.isCategoryPage(e))return this.getPageId(e);if(!e)for(var n=t(".breadcrumbs li"),i=0;i<n.length;i++){var r=n.eq(i).find("a").attr("href");if(r&&this.isCategoryPage(r))return this.getPageId(r)}return null},getSectionId:function(e){if(this.isSectionPage(e))return this.getPageId(e);if(!e)for(var n=t(".breadcrumbs li"),i=0;i<n.length;i++){var r=n.eq(i).find("a").attr("href");if(r&&this.isSectionPage(r))return this.getPageId(r)}return null},getArticleId:function(t){return this.isArticlePage(t)?this.getPageId(t):null},getCurrentUser:function(e){var n=this;t.getJSON("/api/v2/users/me.json").done((function(t){return e.call(n,null,t.user)})).fail((function(t){return e.call(n,t,null)}))},getArticleImages:function(e){return t("<div>"+e+"</div>").find("img").map((function(){return this.getAttribute("src")}))},getUrlParameter:function(t){var n,i,r=e.location.search.substring(1).split("&");for(i=0;i<r.length;i++)if((n=r[i].split("="))[0]===t)return void 0===n[1]||decodeURIComponent(n[1])},isHomePage:function(t){var n=t||e.location.href;return/^http(s)?:\/\/[^\/?#]+(\/hc(\/[a-z-0-9_]+)?(\/)?(signin)?([?]([^?\/]+)?)?([#]([^#\/]+)?)?)?$/.test(n)},isCategoryPage:function(t){var n=t||e.location.href;return/\/hc\/([a-z-0-9_]+\/)?categories\//i.test(n)},isSectionPage:function(t){var n=t||e.location.href;return/\/hc\/([a-z-0-9_]+\/)?sections\//i.test(n)},isArticlePage:function(t){var n=t||e.location.href;return/\/hc\/([a-z-0-9_]+\/)?articles\//i.test(n)},isSearchResultsPage:function(t){var n=t||e.location.href;return/\/hc\/([a-z-0-9_]+\/)?search\?*.*/i.test(n)},isContributionsPostsPage:function(t){var n=t||e.location.href;return/\/hc\/([a-z-0-9_]+\/)?contributions\/posts(\/)?([?#].*)?$/i.test(n)},isContributionsCommunityCommentsPage:function(t){var n=t||e.location.href;return/\/hc\/([a-z-0-9_]+\/)?contributions\/community_comments(\/)?([?#].*)?$/i.test(n)},isContributionsCommentsPage:function(t){var n=t||e.location.href;return/\/hc\/([a-z-0-9_]+\/)?contributions\/comments(\/)?([?#].*)?$/i.test(n)},isFollowingPage:function(t){var n=t||e.location.href;return/\/hc\/([a-z-0-9_]+\/)?subscriptions(\/)?([?#].*)?$/i.test(n)},isRequestListPage:function(t){var n=t||e.location.href;return/\/hc\/([a-z-0-9_]+\/)?requests(\/)?([?#].*)?$/i.test(n)},isRequestPage:function(t){var n=t||e.location.href;return!this.isNewRequestPage(n)&&/\/hc\/([a-z-0-9_]+\/)?requests\/[^/?#]+(\/)?([?#].*)?$/i.test(n)},isNewRequestPage:function(t){var n=t||e.location.href;return/\/hc\/([a-z-0-9_]+\/)?requests\/new(\/)?([?#].*)?$/i.test(n)},isCommunityTopicListPage:function(t){var n=t||e.location.href;return/\/hc\/([a-z-0-9_]+\/)?community\/topics(\/)?([?#].*)?$/i.test(n)},isCommunityTopicPage:function(t){var n=t||e.location.href;return/\/hc\/([a-z-0-9_]+\/)?community\/topics\/[^\/?#]+(\/)?([?#].*)?$/i.test(n)},isCommunityPostListPage:function(t){var n=t||e.location.href;return/\/hc\/([a-z-0-9_]+\/)?community\/posts(\/)?([?#].*)?$/i.test(n)},isCommunityPostPage:function(t){var n=t||e.location.href;return!this.isNewCommunityPostPage(n)&&/\/hc\/([a-z-0-9_]+\/)?community\/posts\/[^\/?#]+(\/)?([?#].*)?$/i.test(n)},isNewCommunityPostPage:function(t){var n=t||e.location.href;return/\/hc\/([a-z-0-9_]+\/)?community\/posts\/new(\/)?([?#].*)?$/i.test(n)},isUserProfilePage:function(t){var n=t||e.location.href;return/\/hc\/([a-z-0-9_]+\/)?profiles\/[^\/?#]+(\/)?([?#].*)?$/i.test(n)},isEndUser:function(t){return!(!t||!t.role||"end-user"!==t.role)},hasUserTags:function(t,e){return!(!t||!t.tags)&&this.findOne(e,t.tags)},findOne:function(t,e){return e.some((function(e){return t.indexOf(e)>=0}))},truncate:function(t,e,i){i=i||"...";var r=n.createElement("div");r.innerHTML=t;var o=r.textContent;return o.length>e?o.slice(0,e)+i:o},flatten:function(t){return t.length?t.reduce((function(t,e){return t.concat(e)})):[]}};e.LotusUtils=i}(jQuery,window,document);