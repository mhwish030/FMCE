<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- all css here -->
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/responsive.css" />
    <link rel="stylesheet" href="css/join-now.css" />
    <link rel="stylesheet" href="style.css" />
    <!-- EmailJS SDK -->
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"
    ></script>
  </head>

  <body>
    <!-- Header area -->
    <header class="site_header">
      <div class="container">
        <a href="index.html" class="site_logo"
          ><img src="img/Logo.png" class="w-50" alt=""
        /></a>
        <ul class="menu">
          <li><a href="#">Plans</a></li>
          <li><a href="#">Reviews</a></li>
          <li>
            <p><a class="link" id="openAU">About Us</a></p>
          </li>
          <li><a href="#">FAQs</a></li>
          <li><a href="#">Get Started</a></li>
        </ul>
        <a href="login/index.html" class="user"
          ><img src="img/user.svg" alt="" class="w-100"
        /></a>
        <!-- menu toggler -->
        <div class="hamburger-menu">
          <span class="line-top"></span>
          <span class="line-center"></span>
          <span class="line-bottom"></span>
        </div>
      </div>
    </header>

    <!-- Form  -->
    <div class="join-form">
      <div class="form">
        <div class="form-header">Let's start with the Basics</div>

        <form
          id="join-form"
          name="join-form"
          data-name="Join Form"
          class="registration-form"
        >
          <div class="form-label">
            Let's make sure we are licensed in your state
          </div>
          <select class="form-select" name="state" id="state" required>
            <option value="" disabled selected>State...</option>
            <option value="Alabama">Alabama</option>
            <option value="Alaska">Alaska</option>
            <option value="Arizona">Arizona</option>
            <option value="Arkansas">Arkansas</option>
            <option value="California">California</option>
            <option value="Colorado">Colorado</option>
            <option value="Connecticut">Connecticut</option>
            <option value="Delaware">Delaware</option>
            <option value="Georgia">Georgia</option>
            <option value="Hawaii">Hawaii</option>
            <option value="Idaho">Idaho</option>
            <option value="Illinois">Illinois</option>
            <option value="Indiana">Indiana</option>
            <option value="Iowa">Iowa</option>
            <option value="Kansas">Kansas</option>
            <option value="Kentucky">Kentucky</option>
            <option value="Louisiana">Louisiana</option>
            <option value="Maine">Maine</option>
            <option value="Maryland">Maryland</option>
            <option value="Massachusetts">Massachusetts</option>
            <option value="Michigan">Michigan</option>
            <option value="Minnesota">Minnesota</option>
            <option value="Mississippi">Mississippi</option>
            <option value="Missouri">Missouri</option>
            <option value="Montana">Montana</option>
            <option value="Nebraska">Nebraska</option>
            <option value="Nevada">Nevada</option>
            <option value="New Hampshire">New Hampshire</option>
            <option value="New Jersey">New Jersey</option>
            <option value="New Mexico">New Mexico</option>
            <option value="New York">New York</option>
            <option value="North Carolina">North Carolina</option>
            <option value="North Dakota">North Dakota</option>
            <option value="Ohio">Ohio</option>
            <option value="Oklahoma">Oklahoma</option>
            <option value="Oregon">Oregon</option>
            <option value="Pennsylvania">Pennsylvania</option>
            <option value="Rhode Island">Rhode Island</option>
            <option value="South Carolina">South Carolina</option>
            <option value="South Dakota">South Dakota</option>
            <option value="Tennessee">Tennessee</option>
            <option value="Texas">Texas</option>
            <option value="Utah">Utah</option>
            <option value="Vermont">Vermont</option>
            <option value="Virginia">Virginia</option>
            <option value="Washington">Washington</option>
            <option value="Washington D.C.">Washington D.C.</option>
            <option value="West Virginia">West Virginia</option>
            <option value="Wisconsin">Wisconsin</option>
            <option value="Wyoming">Wyoming</option>
          </select>

          <div class="form-label">
            Who do I have the pleasure of talking to?
          </div>
          <div class="name-inputs">
            <input
              type="text"
              name="firstName"
              id="firstName"
              placeholder="First Name"
              class="form-input"
              required
            />
            <input
              type="text"
              name="lastName"
              id="lastName"
              placeholder="Last Name"
              class="form-input"
              required
            />
          </div>

          <div class="form-label">What was your gender at birth?</div>
          <div class="gender-selection">
            <label class="gender-option">
              <div class="gender-input">
                <input
                  type="checkbox"
                  name="gender"
                  id="gender-male"
                  value="male"
                  class="form-checkbox"
                />
                <span class="gender-label">Male</span>
              </div>
              <img
                src="https://join.newself.com/images/Male.svg"
                alt="male"
                class="gender-icon"
              />
            </label>
            <label class="gender-option">
              <div class="gender-input">
                <input
                  type="checkbox"
                  name="gender"
                  id="gender-female"
                  value="female"
                  class="form-checkbox"
                />
                <span class="gender-label">Female</span>
              </div>
              <img
                src="https://join.newself.com/images/Female.svg"
                alt="female"
                class="gender-icon"
              />
            </label>
          </div>

          <div class="form-label">Please enter your email</div>
          <input
            type="email"
            name="email"
            id="email"
            placeholder="Enter your email"
            class="form-input"
            required
          />
          <div class="consent-notice">
            <label for="check" class="consent-checkbox">
              <input type="checkbox" name="emailConsent" id="check" />
              <div class="consent-text">
                I agree to receive doctor correspondence, transactional and/or
                marketing messaging from NewSelf to the email address that I
                provided above.
              </div>
            </label>
          </div>

          <div class="form-label">Please enter your mobile number</div>
          <input
            type="tel"
            name="phone"
            id="phone"
            placeholder="Enter your phone"
            class="form-input"
            required
          />

          <div class="form-label">
            Can we send you text messages about your prescription?
          </div>
          <div class="form-description">
            (including tracking information and refill information)
          </div>

          <div class="text-consent-options">
            <label class="consent-option">
              <div class="consent-input">
                <input
                  type="checkbox"
                  name="text_consent"
                  id="text-yes"
                  value="Yes"
                  class="form-checkbox"
                />
                <span class="consent-label">Yes</span>
              </div>
            </label>
            <label class="consent-option">
              <div class="consent-input">
                <input
                  type="checkbox"
                  name="text_consent"
                  id="text-no"
                  value="No"
                  class="form-checkbox"
                />
                <span class="consent-label">No</span>
              </div>
            </label>
          </div>

          <div class="sms-consent-notice">
            <div class="sms-consent-checkbox">
              <input type="checkbox" name="smsConsent" id="checked" />
              <label for="checked" class="sms-consent-text">
                By checking this box, I also consent by electronic signature to
                receive phone calls and/or SMS text messages at the phone
                number(s) below, including my wireless number if provided. I
                understand these calls may be generated using an automated
                technology, pre-recorded voices and that data rates may apply. I
                understand that my consent is not required to buy goods/services
                and I may opt out at any time to avoid receiving calls or SMS
                text messages.</label
              >
            </div>
          </div>

          <div class="form-submit">
            <input
              type="submit"
              value="Submit"
              class="submit-btn"
              id="submit-btn"
            />
            <img src="img/right-arrow.svg" alt="Submit" class="submit-icon" />
          </div>
        </form>
      </div>
    </div>

    <!-- JavaScript for form handling -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("join-form");

        // Initialize EmailJS with your public key
        // Replace 'YOUR_PUBLIC_KEY' with your actual EmailJS public key
        emailjs.init("tmG0DUq1XDCHB0RiL");

        // Handle gender checkboxes - only allow one selection
        const genderCheckboxes = document.querySelectorAll(
          'input[name="gender"]'
        );
        genderCheckboxes.forEach((checkbox) => {
          checkbox.addEventListener("change", function () {
            if (this.checked) {
              // Uncheck all other gender checkboxes
              genderCheckboxes.forEach((otherCheckbox) => {
                if (otherCheckbox !== this) {
                  otherCheckbox.checked = false;
                }
              });
            }
          });
        });

        // Handle text consent checkboxes - only allow one selection
        const textConsentCheckboxes = document.querySelectorAll(
          'input[name="text_consent"]'
        );
        textConsentCheckboxes.forEach((checkbox) => {
          checkbox.addEventListener("change", function () {
            if (this.checked) {
              // Uncheck all other text consent checkboxes
              textConsentCheckboxes.forEach((otherCheckbox) => {
                if (otherCheckbox !== this) {
                  otherCheckbox.checked = false;
                }
              });
            }
          });
        });

        form.addEventListener("submit", function (e) {
          e.preventDefault(); // Prevent default form submission

          // Show loading state
          const submitBtn = document.getElementById("submit-btn");
          const originalText = submitBtn.value;
          submitBtn.value = "Sending...";
          submitBtn.disabled = true;

          // Collect form data
          const formData = {
            state: document.getElementById("state").value,
            firstName: document.getElementById("firstName").value,
            lastName: document.getElementById("lastName").value,
            gender:
              document.querySelector('input[name="gender"]:checked')?.value ||
              null,
            email: document.getElementById("email").value,
            phone: document.getElementById("phone").value,
            emailConsent: document.getElementById("check").checked,
            textConsent:
              document.querySelector('input[name="text_consent"]:checked')
                ?.value || null,
            smsConsent: document.getElementById("checked").checked,
          };

          // Log form data to console
          console.log("Form submitted with the following data:");
          console.log("=====================================");
          console.log("State:", formData.state);
          console.log("First Name:", formData.firstName);
          console.log("Last Name:", formData.lastName);
          console.log("Gender:", formData.gender);
          console.log("Email:", formData.email);
          console.log("Phone:", formData.phone);
          console.log("Email Consent:", formData.emailConsent);
          console.log("Text Message Consent:", formData.textConsent);
          console.log("SMS Consent:", formData.smsConsent);
          console.log("=====================================");

          // Prepare email template parameters
          const templateParams = {
            to_email: "osamaaslam029@gmail.com", // Replace with your email
            from_name: `${formData.firstName} ${formData.lastName}`,
            from_email: formData.email,
            state: formData.state,
            first_name: formData.firstName,
            last_name: formData.lastName,
            gender: formData.gender || "Not specified",
            phone: formData.phone,
            email_consent: formData.emailConsent ? "Yes" : "No",
            text_consent: formData.textConsent || "Not specified",
            sms_consent: formData.smsConsent ? "Yes" : "No",
            message: `
New Registration Form Submission:

Personal Information:
- Name: ${formData.firstName} ${formData.lastName}
- Email: ${formData.email}
- Phone: ${formData.phone}
- State: ${formData.state}
- Gender: ${formData.gender || "Not specified"}

Consent Preferences:
- Email Marketing: ${formData.emailConsent ? "Yes" : "No"}
- Text Messages: ${formData.textConsent || "Not specified"}
- SMS Consent: ${formData.smsConsent ? "Yes" : "No"}

Submitted on: ${new Date().toLocaleString()}
            `,
          };

          // Send email using EmailJS
          emailjs
            .send("service_jn4breg", "template_upfh1rs", templateParams)
            .then(function (response) {
              console.log(
                "Email sent successfully!",
                response.status,
                response.text
              );

              // Show success message
              alert(
                "Thank you! Your information has been submitted successfully. We'll be in touch soon!"
              );

              // Reset form
              form.reset();

              // Reset button
              submitBtn.value = originalText;
              submitBtn.disabled = false;
            })
            .catch(function (error) {
              console.error("Failed to send email:", error);

              // Show error message
              alert(
                "Sorry, there was an error submitting your form. Please try again or contact us directly."
              );

              // Reset button
              submitBtn.value = originalText;
              submitBtn.disabled = false;
            });
        });
      });
    </script>
  </body>
</html>
